<!DOCTYPE html>
<html lang="en">

<head>
	<title>Categories</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="Wish shop project">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="/styles/bootstrap4/bootstrap.min.css">
	<link href="/plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href="/plugins/malihu-custom-scrollbar/jquery.mCustomScrollbar.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="/plugins/jquery-ui-1.12.1.custom/jquery-ui.css">
	<link rel="stylesheet" type="text/css" href="/styles/categories.css">
	<link rel="stylesheet" type="text/css" href="/styles/categories_responsive.css">
	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

	<div class="super_container">

		<!-- Header -->

		<header class="header">
			<div class="header_inner d-flex flex-row align-items-center justify-content-start">
				<div class="logo"><a href="/">NAZMA</a></div>
				<nav class="main_nav">
					<ul>
						<li><a href="/landing">home</a></li>
						<li><a href="/categories">categories</a></li>

						<li><a href="/contact">contact</a></li>
					</ul>
				</nav>
				<div class="header_content ml-auto">
					<div class="search header_search">
						<form action="#">
							<input type="search" class="search_input" required="required">
							<button type="submit" id="search_button" class="search_button"><img
									src="/images/magnifying-glass.svg" alt=""></button>
						</form>
					</div>
					<div class="shopping">
						<!-- Cart -->
						<a href="/cart">
							<div class="cart text-dark">
								<span class="material-symbols-outlined">
									shopping_bag
								</span>
							
							</div>
						</a>
						<!-- Star -->
						<a href="/wishList">
							<div class="star text-dark">
								<span class="material-symbols-outlined">
									favorite
								</span>
								
							</div>
						</a>
						<!-- Avatar -->
						<a href="/profile">
							<div class="avatar text-dark">
								<span class="material-symbols-outlined">
									person
								</span>
							</div>
						</a>
						<% if (user){ %>

							<a href="/userLogout">
								<div class="avatar text-dark" id="">
									<span class="material-symbols-outlined">
										exit_to_app <!-- This icon represents logout -->
									</span>
								</div>
							</a>
					<%	} %>
						
						
					</div>
				</div>

				<div class="burger_container d-flex flex-column align-items-center justify-content-around menu_mm">
					<div></div>
					<div></div>
					<div></div>
				</div>
			</div>
		</header>

		<!-- Menu -->

		<div class="menu d-flex flex-column align-items-end justify-content-start text-right menu_mm trans_400">
			<div class="menu_close_container">
				<div class="menu_close">
					<div></div>
					<div></div>
				</div>
			</div>
			<div class="logo menu_mm"><a href="/">NAZMA</a></div>
			<div class="search">
				<form action="#">
					<input type="search" class="search_input menu_mm" required="required">
					<button type="submit" id="search_button_menu" class="search_button menu_mm"><img class="menu_mm"
							src="/images/magnifying-glass.svg" alt=""></button>
				</form>
			</div>
			<nav class="menu_nav">
				<ul class="menu_mm">
					<li class="menu_mm"><a href="/landing">home</a></li>
					<li class="menu_mm"><a href="/categories">category</a></li>
					<li class="menu_mm"><a href="/contact">contact</a></li>
					<li class="menu_mm"><a href="/wallet">Wallet</a></li>
					<li class="menu_mm"><a href="/login">login</a></li>
					<li class="menu_mm"><a href="/admin">admin</a></li>
				</ul>
			</nav>
		</div>

		<!-- Home -->

		<div class="home">
			<div class="home_background parallax-window" data-parallax="scroll"
				data-image-src="https://c4.wallpaperflare.com/wallpaper/263/603/775/red-dress-women-model-wallpaper-preview.jpg"
				data-speed="0.8"></div>
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="home_container">
							<div class="home_content">
								<div class="home_title">Woman</div>
								<div class="breadcrumbs">
									<ul>
										<li><a href="/landing">Home</a></li>
										<li><a href="/contact">category</a></li>

									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<br>
	
		<div class="container m-3">
			<div class="row">
				<div class="col-md-4 col-12">
					<!-- Search by Category -->
					<form class="form-inline mb-3" action="/categories" method="GET">
						<div class="input-group">
							<% if(selected){%>
							<input type="text" class="form-control" id="productsearch" name="product" placeholder="<%=selected%>">

						<%	}else{%>

								<input type="text" class="form-control" id="productsearch" name="product" placeholder="Search for a product">
						<%	}%>
							<div class="input-group-append">
								<button class="btn btn-primary" type="submit">Search</button>
							</div>
						</div>
					</form>
				</div>
				<div class="col-md-4 col-12">
					<!-- Category Filter -->
					<div class="sidebar_section d-flex w-100" style="border: none;">
						<div class="sidebar_title p-2 rounded text-center" style="line-height: normal;height: 40px;">Category</div>
						<div class="sidebar_section_content d-flex w-100">
							<form id="categoryFilterForm" action="/categories" method="GET">
								<div class="d-flex w-100">
									
										<select class="form-control mb-2" id="categoryFilter" name="category" >
											<% if(selectedcategory){%>
												<option value=""><%= selectedcategory%></option>
											<%}else{%>

												<option value="">Select Category</option>
									<%	}%>
											<option value="all">All</option>
											<% if(List.length){ for(i=0; i<List.length; i++){ %>
											<option value="<%= List[i]._id %>"><%= List[i].categoryName %></option>
											<% }} %>
										</select>
								
									<div><button class="btn btn-primary btn-block" type="submit">Apply </button></div>
								</div>
							</form>
						</div>
					</div>
				</div>
				<div class="col-md-4 col-12">
					<!-- Price Range Filter -->
					<div class="sidebar_section d-flex w-100" style="border: none;">
						<div class="sidebar_title p-2 rounded text-center" style="line-height: normal;height: 40px; width: 106px;">Price</div>
						<div class="sidebar_section_content d-flex w-100">
							<form id="filterForm" action="/categories" method="GET">
								<div class="d-flex">
									<select class="form-control mb-2" id="filter" name="amount" style="width: 162px;">
										<%if(selectedamount){%>
										<option value=""><%= selectedamount%></option>
											
										<%}else{%>

											<option value="">Select Filter</option>
										<%}%>
										<option value="all">All</option>
										<option value="0,99">Rs.0 - Rs.99</option>
										<option value="100,999">Rs.100 - Rs.999</option>
										<option value="1000,9999">Rs.1000 - Rs.9999</option>
										<option value="10000">Rs.9999 - More</option>
									</select>
									<div><button class="btn btn-primary btn-block" type="submit">Apply</button></div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<script>
			$(document).ready(function () {
				// Handle filter selection change
				$('#filter').change(function () {
					// Submit the form when the selection changes
					$('#filterForm').submit();
				});
			});
		</script>
		

		<div class="container">
			<div class="row">
				
				
				<!-- <div class="card mb-4"> -->
					<!-- Display each product in a separate box -->
					<% if(product.length){ for(i=0; i<product.length; i++){ %>
							<div class="col-md-3"><a href="/product?id=<%= product[i]._id %>" >
								<div class="p-3 mb-3" style="border-radius: 2em; border: #e74c3c;">
									<img class="w-100" style="border-radius: 2em; height: 25em;" src="/uploads/<%=product[i].imageUrl[0]%>" alt="Product Image">
								<!-- <div class="card-body"> -->
									
									<h2 class="product-name">
										<%= product[i].productName %>
									</h2>
									<p class="brand-name text-center">
										<%= product[i].brandName %>
									</p>
									<p class="product-description text-center">
										<%= product[i].details %>
									</p>
									<p class="product-amount text-center">
										₹ <%= product[i].amount %>
									</p>
								    <div class="product-buttons text-center">
										
										<a href="/cart?id=<%= product[i]._id %>" class="btn btn-primary"><i class="fa fa-shopping-cart"></i></a>
										<button class="btn btn-secondary" onclick="addwish('<%= product[i]._id %>')"class="btn btn-secondary"><i class="fa fa-heart"></i></button>
										<a href="/checkout?id=<%= product[i]._id %>" class="btn btn-success"><i class="fa fa-shopping-bag"></i></a>
								
									</div>
								</div>
							</a>
						</div>
						<% }} %>
								</div>
								</div>
								
								<br>
								<div class="row">
									<div class="text-center">
										<nav aria-label="Page navigation example ">
											<ul class="pagination ">
												<li class="page-item">
													<!-- Generate the "Previous" link with query.page - 1 -->
													<a class="page-link" href="/categories?page=<%=currentPage - 1 %>">Previous</a>
												</li>
												<% for(let i=1; i <=totalPages; i++) { %>
													<li class="page-item <%= (i === currentPage) ? 'active' : '' %>">
													  <a class="page-link" href="/categories?page=<%= i %>">
														<%= i %>
													  </a>
													</li>
										            <% } %>
												<li class="page-item">
													<!-- Generate the "Next" link with query.page + 1 -->
													<a class="page-link" href="/categories?page=<%=currentPage + 1 %>">Next</a>
												</li>
											</ul>
										  </nav>
									</div>
								</div>
					<style>
						/* Style for the product boxes */
						.product-box {
							display: flex;
							flex-wrap: wrap;
						}

						.card {
							border: none;
							margin-bottom: 20px;
							box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);
						}

						.card-img-top {
							max-height: 200px;
							object-fit: cover;
						}

						.category {
							font-size: 14px;
							color: #999;
							margin-bottom: 5px;
						}

						.product-name {
							font-size: 18px;
							margin: 0;
							color: #333;
						}

						.brand-name {
							font-size: 14px;
							color: #777;
						}

						.product-description {
							font-size: 14px;
							color: #555;
							margin-top: 10px;
						}

						.product-amount {
							font-size: 18px;
							font-weight: bold;
							color: #e74c3c;
							margin-top: 10px;
						}

						/* Responsive styles */
						@media (max-width: 768px) {
							.product-box {
								justify-content: center;
							}

							.card {
								width: 100%;
							}
						}
					</style>
					<script>
						$(document).ready(function () {
							// Filter products based on category selection
							$('#categoryFilter').change(function () {
								var selectedCategory = $(this).val();

								$('.product-box .card').each(function () {
									var productCategory = $(this).find('.category').text().trim();

									if (selectedCategory === 'all' || selectedCategory === productCategory) {
										$(this).show();
									} else {
										$(this).hide();
									}
								});
							});
						});
					</script>
<script>
async function addwish(id){
	console.log(id);console.log('hi');
	const response =  await fetch("/addwish", {
      method: "post",
      headers: {
        "Content-Type": 'application/json'
      },
      body: JSON.stringify({
       id:id,
      })
    })
      .then((res) => {
        // let result = res.json()
		if(res.result =="false") window.alert('please login')
		else window.alert("You added wishList")
      })
      .catch((error) => {
        window.alert("Unable to add wishList")
        console.error(error);})
}

</script>
<script>
    // JavaScript function to handle category search
   async function searchCategory() {
        var searchInput = document.getElementById("productsearch").value.toLowerCase(); // Get user input
		console.log(searchInput);
	
			const response = await fetch('/search', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify({ product:searchInput}),
			});

	}
</script>




					<script src="/js/jquery-3.2.1.min.js"></script>
					<script src="/styles/bootstrap4/popper.js"></script>
					<script src="/styles/bootstrap4/bootstrap.min.js"></script>
					<script src="/plugins/easing/easing.js"></script>
					<script src="/plugins/parallax-js-master/parallax.min.js"></script>
					<script src="/plugins/Isotope/isotope.pkgd.min.js"></script>
					<script src="/plugins/malihu-custom-scrollbar/jquery.mCustomScrollbar.js"></script>
					<script src="/plugins/jquery-ui-1.12.1.custom/jquery-ui.js"></script>
					<script src="/js/categories_custom.js"></script>
					</body>

</html>